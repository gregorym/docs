<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-programs/token-metadata/faq">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">FAQ | Metaplex Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.metaplex.com/programs/token-metadata/faq"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="FAQ | Metaplex Docs"><meta data-rh="true" name="description" content="How can I filter Metadata accounts by fields located after the creators array using getProgramAccounts?"><meta data-rh="true" property="og:description" content="How can I filter Metadata accounts by fields located after the creators array using getProgramAccounts?"><link data-rh="true" rel="icon" href="/logo/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.metaplex.com/programs/token-metadata/faq"><link data-rh="true" rel="alternate" href="https://docs.metaplex.com/programs/token-metadata/faq" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.metaplex.com/programs/token-metadata/faq" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ONUK0F738E-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TNL3E6G9YK"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TNL3E6G9YK",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Metaplex Docs" href="/opensearch.xml">
<script src="https://app.happyreact.com/widget/reactions.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.4b35ad6b.css">
<link rel="preload" href="/assets/js/runtime~main.ee73d6be.js" as="script">
<link rel="preload" href="/assets/js/main.abcc3fc7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo/meta-white.svg" alt="Metaplex logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/logo/meta-black.svg" alt="Metaplex logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Metaplex Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/metaplex-foundation/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/programs/">Programs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Programs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/understanding-programs">Understanding Programs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/programs/token-metadata/">Token Metadata</a><button aria-label="Toggle the collapsible sidebar category &#x27;Token Metadata&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/token-metadata/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/token-metadata/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/token-metadata/accounts">Accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/token-metadata/instructions">Instructions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/token-metadata/token-standard">Token Standard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/token-metadata/certified-collections">Certified Collections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/token-metadata/nft-escrow">NFT Escrow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/token-metadata/using-nfts">Using NFTs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/token-metadata/changelog/">Changelog</a><button aria-label="Toggle the collapsible sidebar category &#x27;Changelog&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/programs/token-metadata/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/candy-machine/">Candy Machine</a><button aria-label="Toggle the collapsible sidebar category &#x27;Candy Machine&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/auction-house/">Auction House</a><button aria-label="Toggle the collapsible sidebar category &#x27;Auction House&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/compression/">Compression</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/fusion/">Fusion</a><button aria-label="Toggle the collapsible sidebar category &#x27;Fusion&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/hydra/">Hydra: Fanout Wallet</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hydra: Fanout Wallet&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/fixed-price-sale/">Fixed-price-sale</a><button aria-label="Toggle the collapsible sidebar category &#x27;Fixed-price-sale&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/nft-packs/">NFT Packs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/gumdrop/">Gumdrop</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/token-entangler/">Token Entangler</a><button aria-label="Toggle the collapsible sidebar category &#x27;Token Entangler&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/sdks/">SDKs</a><button aria-label="Toggle the collapsible sidebar category &#x27;SDKs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/developer-tools/">Developer Tools</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer Tools&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/guides/">Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/resources/">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/deprecated/">Deprecated</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deprecated&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/security">Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contact">Contact Us</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/programs/"><span itemprop="name">Programs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/programs/token-metadata/"><span itemprop="name">Token Metadata</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">FAQ</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>FAQ</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-filter-metadata-accounts-by-fields-located-after-the-creators-array-using-getprogramaccounts">How can I filter Metadata accounts by fields located after the <code>creators</code> array using <code>getProgramAccounts</code>?<a href="#how-can-i-filter-metadata-accounts-by-fields-located-after-the-creators-array-using-getprogramaccounts" class="hash-link" aria-label="Direct link to how-can-i-filter-metadata-accounts-by-fields-located-after-the-creators-array-using-getprogramaccounts" title="Direct link to how-can-i-filter-metadata-accounts-by-fields-located-after-the-creators-array-using-getprogramaccounts">​</a></h3><p>When using <a href="https://docs.solana.com/developing/clients/jsonrpc-api#getprogramaccounts" target="_blank" rel="noopener noreferrer">the <code>getProgramAccounts</code> method from the RPC API</a>, it is common to want to filter accounts by fields using <code>memcmp</code> filters.</p><p>Since the <code>memcmp</code> filter compares arrays of bytes, this approach requires knowledge of the data structure of the account. Additionally, it requires the length of that data structure to be fixed, so we can find the position of the field we&#x27;re looking for, for every single account.</p><p>Unfortunately, the <code>creators</code> field of the <a href="/programs/token-metadata/accounts#metadata">Metadata Account</a> is a vector that can contain one to five creators. This means the position of every field after it depends on how many creators the account has.</p><p>Note that adding new fields to an account without adding breaking change requires appending optional fields to the accounts. This unfortunately means that any new features we may add to the Metadata Account will be after the <code>creators</code> field and therefore will be challenging to filter via <code>getProgramAccounts</code>.</p><p>There are several ways to solve this problem:</p><ul><li>If every single account we are trying to filter has <strong>the same number of creators</strong>, then we can figure out the offset of the next field. We can do this by adding <code>4 + 34 * n</code> to the <code>creators</code> offset, where <code>n</code> is the fixed number of creators and <code>4</code> is because 4 bytes are used to store the length of the vector. This unblocks us for every field of fixed length present after the <code>creators</code> field. Unfortunately, the problem reoccurs as soon as we reach another field of variable size such as another vector or an optional field. Therefore, this solution is only valid if we know the exact length of all variable fields before the field we are trying to filter with.</li><li>Another solution is to <strong>crawl transactions to find the accounts we&#x27;re looking for</strong>. This approach is a bit more complex and requires us to implement a custom procedure that fits our needs. For instance, we can use <code>getSignaturesForAddress</code> to get all transactions associated with an account and then use <code>getTransaction</code> on each of them to access their transaction data before filtering the ones that matter for our use case. It is also worth considering that this approach might not be the most future-proof solution since we might end up relying on instructions that could be deprecated in favor of new ones.</li><li>Finally, <strong>the most robust solution is to index the data we&#x27;re looking for using a <a href="https://docs.solana.com/developing/plugins/geyser-plugins" target="_blank" rel="noopener noreferrer">Geyser Plugin</a></strong>. This currently requires a significant setup, but we end up with a reliable data store that mirrors the data in the Solana blockchain. Not only does it fix our filtering issue, but it also provides a much more convenient and efficient way to access our data.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-filter-metadata-accounts-by-collection-using-getprogramaccounts">How can I filter Metadata accounts by collection using <code>getProgramAccounts</code>?<a href="#how-can-i-filter-metadata-accounts-by-collection-using-getprogramaccounts" class="hash-link" aria-label="Direct link to how-can-i-filter-metadata-accounts-by-collection-using-getprogramaccounts" title="Direct link to how-can-i-filter-metadata-accounts-by-collection-using-getprogramaccounts">​</a></h3><p>As mentioned in the question above, filtering by fields present after the <code>creators</code> array is a challenging task because it is not a field of fixed size.</p><p>Since <strong>the <code>collection</code> field is located after the <code>creators</code> field</strong>, this makes filtering <a href="/programs/token-metadata/accounts#metadata">Metadata accounts</a> by collection somewhat difficult.</p><p>The solutions listed above apply here too but, because this is a common problem, we have written a more detailed guide on how to use transaction crawling to access Metadata accounts of a given collection: <strong><a href="https://metaplex.notion.site/Get-Collection-Methods-1ff0b118e4ce4605971df60e753a8559" target="_blank" rel="noopener noreferrer">Get Collection Methods</a></strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-are-the-mint-and-freeze-authorities-transferred-to-the-edition-pda">Why are the mint and freeze authorities transferred to the Edition PDA?<a href="#why-are-the-mint-and-freeze-authorities-transferred-to-the-edition-pda" class="hash-link" aria-label="Direct link to Why are the mint and freeze authorities transferred to the Edition PDA?" title="Direct link to Why are the mint and freeze authorities transferred to the Edition PDA?">​</a></h3><p>One question we often receive is: Why does the Token Metadata program transfer the <code>Mint Authority</code> and the <code>Freeze Authority</code> of the Mint Account to the Edition PDA when creating NFTs? Why not just void them by setting them to <code>None</code>?</p><p>Let&#x27;s take a look at why this is the case for both of these authorities separately.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mint-authority">Mint Authority<a href="#mint-authority" class="hash-link" aria-label="Direct link to Mint Authority" title="Direct link to Mint Authority">​</a></h4><p>Controlling the Mint Authority is a crucial step for ensuring the non-fungibility of a token. Without this protection, someone could mint more tokens for a given NFT and therefore make the NFT fungible.</p><p>One way to prevent this from happening is to set the Mint Authority to <code>None</code> to ensure no one will ever be able to mint any more tokens for that NFT. However, the Token Metadata program sets that authority to the Edition PDA — which links to a Master Edition account or an Edition account.</p><p><strong>But Why?</strong> The short answer is: <strong>it enables us to deploy upgrades to the Token Metadata program at a much lower cost</strong>.</p><p>Losing the Mint Authority is an irreversible action which means we could never leverage it to migrate NFTs to newer versions. For instance, say we want to change the way Original and Printed NFTs are structured and, instead of using Edition accounts, we want to leverage tokens. Without the Mint Authority, migrating NFTs to the new version would simply be impossible.</p><p><strong>Losing this authority would limit the scope of features and changes we may want to implement in the future</strong> and that&#x27;s why we&#x27;re not setting it to <code>None</code>.</p><p>However, that doesn&#x27;t mean someone can use that Mint Authority to mint more tokens on your NFT. The Mint Authority isn&#x27;t transferred to someone&#x27;s public key, it is transferred to a PDA that belongs to the Token Metadata program. Therefore, only an instruction provided by the program could make use of it and such instruction does not exist on the program. It is important to note that the Token Metadata program is completely open-source so anyone can inspect it to ensure the Mint Authority is not used to mint more tokens.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="freeze-authority">Freeze Authority<a href="#freeze-authority" class="hash-link" aria-label="Direct link to Freeze Authority" title="Direct link to Freeze Authority">​</a></h4><p>Controlling the Freeze Authority allows someone to freeze a Token account, making that account immutable until it is thawed.</p><p>One reason this authority is transferred to the Edition PDA of the Token Metadata program is, similarly to the Mint Authority, it increases the scope of potential new features and upgrades.</p><p>However, contrary to the Mint Authority, we actually make use of that authority in the program.</p><p>The <a href="/programs/token-metadata/instructions#freeze-the-token-account-as-a-delegate"><code>FreezeDelegatedAccount</code></a> and <a href="/programs/token-metadata/instructions#thaw-the-token-account-as-a-delegate"><code>ThawDelegatedAccount</code></a> instructions are the only instructions that make use of the Freeze Authority. They allow the Delegate of a Token account to freeze (and thaw) that Token account to make them what we call &quot;<strong>Non-Transferable NFTs</strong>&quot;. This enables a variety of use-cases such as preventing someone from selling an NFT while it is listed in an escrowless marketplace.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-does-the-metadata-account-have-both-on-chain-and-off-chain-data">Why does the Metadata account have both on-chain and off-chain data?<a href="#why-does-the-metadata-account-have-both-on-chain-and-off-chain-data" class="hash-link" aria-label="Direct link to Why does the Metadata account have both on-chain and off-chain data?" title="Direct link to Why does the Metadata account have both on-chain and off-chain data?">​</a></h3><p>The <a href="/programs/token-metadata/accounts#metadata">Metadata account</a> contains on-chain data, yet it also has a <code>URI</code> attribute which points to an off-chain JSON file which provides additional data. So why is that? Can&#x27;t we just store everything on-chain? Well, there are several issues with that:</p><ul><li>We have to pay rent to store data on-chain. If we had to store everything within the Metadata account, which may include long texts such as the description of an NFT, it would require a lot more bytes and minting an NFT would suddenly be a lot more expensive.</li><li>On-chain data is much less flexible. Once an account is created using a certain structure, it cannot easily be changed. Therefore, if we had to store everything on-chain, the NFT standard would be a lot harder to evolve with the demands of the ecosystem.</li></ul><p>Therefore, splitting the data into on-chain and off-chain data allows us to get the best of both worlds where on-chain data can be used by the program <strong>to create guarantees and expectations for its users</strong> whereas off-chain data can be used <strong>to provide standardized yet flexible information</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="are-there-any-costs-to-using-token-metadata">Are there any costs to using Token Metadata?<a href="#are-there-any-costs-to-using-token-metadata" class="hash-link" aria-label="Direct link to Are there any costs to using Token Metadata?" title="Direct link to Are there any costs to using Token Metadata?">​</a></h3><p>Token Metadata currently charges very small fees ranging between 0.001 SOL and 0.01 SOL to the caller of certain instructions. More details can be found on the Protocol Fees page.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/metaplex/docs/tree/main/docs/01-programs/01-token-metadata/08-faq.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-07-07T19:36:58.000Z">Jul 7, 2023</time></b></span></div></div><div><div class="feedbackWidget"><h3>Was this page helpful?</h3><div class="widget_UOf8" data-hr-token="8c828a21-ead0-4998-b98b-f465fd3e4e4f" data-hr-resource="programs-token-metadata-faq" data-hr-styles="{&quot;grid&quot;:&quot;grid_uXr7&quot;,&quot;cell&quot;:&quot;cell_NyhG&quot;,&quot;reaction&quot;:&quot;reaction_jDJL&quot;,&quot;footer&quot;:&quot;footer_VuXo&quot;}" data-hr-strategy="instant"></div></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/programs/token-metadata/changelog/v1.0"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">v1.0</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/programs/candy-machine/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Candy Machine</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-can-i-filter-metadata-accounts-by-fields-located-after-the-creators-array-using-getprogramaccounts" class="table-of-contents__link toc-highlight">How can I filter Metadata accounts by fields located after the <code>creators</code> array using <code>getProgramAccounts</code>?</a></li><li><a href="#how-can-i-filter-metadata-accounts-by-collection-using-getprogramaccounts" class="table-of-contents__link toc-highlight">How can I filter Metadata accounts by collection using <code>getProgramAccounts</code>?</a></li><li><a href="#why-are-the-mint-and-freeze-authorities-transferred-to-the-edition-pda" class="table-of-contents__link toc-highlight">Why are the mint and freeze authorities transferred to the Edition PDA?</a></li><li><a href="#why-does-the-metadata-account-have-both-on-chain-and-off-chain-data" class="table-of-contents__link toc-highlight">Why does the Metadata account have both on-chain and off-chain data?</a></li><li><a href="#are-there-any-costs-to-using-token-metadata" class="table-of-contents__link toc-highlight">Are there any costs to using Token Metadata?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/metaplex" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/metaplex" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://solana.stackexchange.com/questions/tagged/metaplex" target="_blank" rel="noopener noreferrer" class="footer__link-item">StackExchange<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/metaplex-foundation/metaplex" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Powered by</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://happyreact.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Happy React<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Metaplex</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ee73d6be.js"></script>
<script src="/assets/js/main.abcc3fc7.js"></script>
</body>
</html>