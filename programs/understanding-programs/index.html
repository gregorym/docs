<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-programs/understanding-programs">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Understanding Programs | Metaplex Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.metaplex.com/programs/understanding-programs"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Understanding Programs | Metaplex Docs"><meta data-rh="true" name="description" content="This page aims to provide a quick overview of how programs work in Solana and offer additional reading material for those who are interested in learning more about a particular subject."><meta data-rh="true" property="og:description" content="This page aims to provide a quick overview of how programs work in Solana and offer additional reading material for those who are interested in learning more about a particular subject."><link data-rh="true" rel="icon" href="/logo/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.metaplex.com/programs/understanding-programs"><link data-rh="true" rel="alternate" href="https://docs.metaplex.com/programs/understanding-programs" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.metaplex.com/programs/understanding-programs" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ONUK0F738E-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TNL3E6G9YK"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TNL3E6G9YK",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Metaplex Docs" href="/opensearch.xml">
<script src="https://app.happyreact.com/widget/reactions.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.118da3bc.css">
<link rel="preload" href="/assets/js/runtime~main.b61b5b2a.js" as="script">
<link rel="preload" href="/assets/js/main.f9f50fc6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo/meta-white.svg" alt="Metaplex logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/logo/meta-black.svg" alt="Metaplex logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Metaplex Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/metaplex-foundation/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/programs/">Programs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Programs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/programs/understanding-programs">Understanding Programs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/token-metadata/">Token Metadata</a><button aria-label="Toggle the collapsible sidebar category &#x27;Token Metadata&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/candy-machine/">Candy Machine</a><button aria-label="Toggle the collapsible sidebar category &#x27;Candy Machine&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/auction-house/">Auction House</a><button aria-label="Toggle the collapsible sidebar category &#x27;Auction House&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/compression/">Compression</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/fusion/">Fusion</a><button aria-label="Toggle the collapsible sidebar category &#x27;Fusion&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/hydra/">Hydra: Fanout Wallet</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hydra: Fanout Wallet&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/fixed-price-sale/">Fixed-price-sale</a><button aria-label="Toggle the collapsible sidebar category &#x27;Fixed-price-sale&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/nft-packs/">NFT Packs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/programs/gumdrop/">Gumdrop</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/programs/token-entangler/">Token Entangler</a><button aria-label="Toggle the collapsible sidebar category &#x27;Token Entangler&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/sdks/">SDKs</a><button aria-label="Toggle the collapsible sidebar category &#x27;SDKs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/developer-tools/">Developer Tools</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer Tools&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/guides/">Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/resources/">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/deprecated/">Deprecated</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deprecated&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/security">Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contact">Contact Us</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/programs/"><span itemprop="name">Programs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Understanding Programs</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Understanding Programs</h1><p>This page aims to provide a quick overview of how programs work in Solana and offer additional reading material for those who are interested in learning more about a particular subject.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>Unlike most blockchains, <strong>Solana separates logic and data</strong> into two separate components. These are, respectively, <strong>Programs</strong> and <strong>Accounts</strong>. What that means is that instead of storing data inside variables internally, Programs interact with external data stored in Accounts with the ability to mutate them.</p><p>This architecture is great for making Programs more modular since the data they interact with is not bound by the Program itself and can scale to new orders of magnitude. It is also great for making Programs more performant since it allows the blockchain to run the same Program in parallel with different Accounts.</p><p>To interact with a Program, we must use the <strong>Instructions</strong> defined by that Program. You can think of Instructions as API endpoints exposed by the Program. Each Instruction contains a set of parameters and constraints that must be fulfilled to execute it.</p><p>To recap: <strong>In Solana, Programs define Instructions that can be used to interact with external data stores called Accounts</strong>.</p><p>Note that, technically, Programs are special kinds of Accounts marked as <code>executable</code> whose entire purpose is to store the compiled code of the Program. However, for the sake of simplicity, we will distinguish these definitions and use the term &quot;Account&quot; to refer to non-executable Accounts.</p><p>In the rest of this guide, we will talk about Accounts and Instructions in more detail before explaining the visual representation that we will be using in diagrams throughout the documentation.</p><p>📚 <strong>Additional reading</strong>:</p><ul><li><a href="https://docs.solana.com/developing/on-chain-programs/overview" target="_blank" rel="noopener noreferrer">Solana Documentation — On-chain Programs</a></li><li><a href="https://solanacookbook.com/core-concepts/programs.html" target="_blank" rel="noopener noreferrer">Solana Cookbook — Programs</a></li><li><a href="https://book.anchor-lang.com/prerequisites/intro_to_solana.html" target="_blank" rel="noopener noreferrer">The Anchor Book — Intro to Programming on Solana</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="accounts">Accounts<a href="#accounts" class="hash-link" aria-label="Direct link to Accounts" title="Direct link to Accounts">​</a></h2><p>In Solana, <strong>Accounts are used to store data</strong>. In essence, they are simple arrays of bytes stored at a particular address. The address of an Account is the <strong>public key</strong> of a cryptographic key pair.</p><p>Anyone that has access to the <strong>private key</strong> of that key pair, can sign on behalf of that Account which, depending on the program, may give them the ability to mutate the data stored in that Account.</p><p>Once an Account is created, it is usually immediately initialized by a Program which will be marked as its <strong>Owner</strong> and will define the data structure of the allocated array of bytes. The Program that owns the Account is then responsible for providing Instructions that can be used to interact with it.</p><p>📚 <strong>Additional reading</strong>:</p><ul><li><a href="https://docs.solana.com/developing/programming-model/accounts" target="_blank" rel="noopener noreferrer">Solana Documentation — Accounts</a></li><li><a href="https://solanacookbook.com/core-concepts/accounts.html" target="_blank" rel="noopener noreferrer">Solana Cookbook — Accounts</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-derived-addresses-pda">Program Derived Addresses (PDA)<a href="#program-derived-addresses-pda" class="hash-link" aria-label="Direct link to Program Derived Addresses (PDA)" title="Direct link to Program Derived Addresses (PDA)">​</a></h3><p>There exist another type of Account, called <strong>Program Derived Account</strong>, whose address is not the public key of a cryptographic key pair but instead is algorithmically derived from the public key of the Program that owns the Account. We call that address a <strong>Program Derived Address</strong> or <strong>PDA</strong> for short.</p><p>Since the address is always derived from the public key of the Program, no other Program can algorithmically derive the same address. On top of that, additional <strong>Seeds</strong> can be provided to the algorithm to add more context to the address.</p><p>This has a variety of use cases such as enabling programs to sign <a href="#cross-program-invokations">Cross-Program Invocations</a> or enabling the creation of accounts within an address that can be derived deterministically.</p><p>Note that, by design, Program Derived Addresses will never conflict with cryptographically generated public keys. All cryptographic public keys are part of what we call an <a href="https://en.wikipedia.org/wiki/Elliptic-curve_cryptography" target="_blank" rel="noopener noreferrer">Elliptic-curve</a>. If, when generating a PDA, the algorithm generated a key that falls on that curve, a <strong>Bump</strong> is added to the address and is incremented by one until the generated address no longer falls on the curve.</p><p>📚 <strong>Additional reading</strong>:</p><ul><li><a href="https://docs.solana.com/developing/programming-model/calling-between-programs#program-derived-addresses" target="_blank" rel="noopener noreferrer">Solana Documentation — PDAs</a></li><li><a href="https://solanacookbook.com/core-concepts/pdas.html" target="_blank" rel="noopener noreferrer">Solana Cookbook — PDAs</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="account-data">Account data<a href="#account-data" class="hash-link" aria-label="Direct link to Account data" title="Direct link to Account data">​</a></h3><p>Whether we are dealing with a regular Account or a Program Derived Account, Accounts store data as a serialized array of bytes. Therefore, it is the responsibility of the Program to define a data structure for each of the Accounts it manages as well as provide a way of differentiating these Accounts, so we know which data structure to apply to them.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="discriminators">Discriminators<a href="#discriminators" class="hash-link" aria-label="Direct link to Discriminators" title="Direct link to Discriminators">​</a></h3><p>Discriminators are used to differentiate between different types of Accounts within a Program. They can be implemented in many ways but here are the three most common ones:</p><ul><li><strong>Use a shared Enum as the first byte of every account</strong>. By prefixing every Account with a shared Enum, we can use the first byte of the serialized data to identify the Account. This is a simple and efficient way to implement discriminators. Most of the programs maintained by Metaplex use this approach.</li><li><strong>Use a deterministic hash as the first byte of every account</strong>. This is very similar to the previous point, but it uses a hash instead of an Enum. Programs created using the Anchor framework end up using this approach implicitly because Anchor will automatically generate that hash based on the Account&#x27;s name.</li><li><strong>No discriminator, use the size of the Account</strong>. If all the accounts managed by a Program have different sizes, then we can examine the length of that array of bytes to determine which Account we are dealing with. This is a performant approach since we don&#x27;t need to add extra bytes to the data, but it limits how flexible a Program can be with its Accounts. The <a href="https://spl.solana.com/token" target="_blank" rel="noopener noreferrer">SPL Token Program</a> by Solana uses this approach since it only maintains two accounts of different fixed sizes.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="field-types-sizes-and-offsets">Field types, sizes and offsets<a href="#field-types-sizes-and-offsets" class="hash-link" aria-label="Direct link to Field types, sizes and offsets" title="Direct link to Field types, sizes and offsets">​</a></h3><p>Each Account defines its own data structure by using fields of different types. These types will affect the number of bytes required to store the field. For instance, an <code>i8</code> is an 8-bit integer that will require 1 byte to store whereas an <code>i64</code> is a 64-bit integer which will require 8 bytes to store.</p><p>Since, in the blockchain, Accounts are just arrays of bytes, it is important to understand the size of each field and where they start in this array, i.e. their offset. This can be useful when fetching multiple accounts from a given program <a href="https://solanacookbook.com/guides/get-program-accounts.html#memcmp" target="_blank" rel="noopener noreferrer">using a <code>memcmp</code> filter</a>.</p><p>Note that not all fields have a fixed size. For instance, a <code>Vec&lt;i8&gt;</code> is a vector of 8-bit integers that may contain none, one or many items. As such, it becomes a lot more complicated to filter accounts based on fields that are located after the first field of variable size.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-fields">Optional fields<a href="#optional-fields" class="hash-link" aria-label="Direct link to Optional fields" title="Direct link to Optional fields">​</a></h3><p>A field can also be defined as <strong>optional</strong>, meaning there exists a scenario where that field can be empty.</p><p>This field will use an additional byte as a prefix to indicate whether the field is empty or not.</p><p>Concretely, the value <code>None</code> will be assigned and the program will act accordingly when using that field.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="indicative-fields">Indicative fields<a href="#indicative-fields" class="hash-link" aria-label="Direct link to Indicative fields" title="Direct link to Indicative fields">​</a></h3><p>Whilst this is not something that is explicitly defined in the data structure, the documentation will mark certain fields as <strong>indicative</strong>.</p><p>An indicative field means that the information provided by the field is not used by the program itself. Instead, it <em>indicates</em> a piece of information to third parties. The program will still enforce the integrity of the data, but it will simply not use that information internally.</p><p>Let’s take the Metadata Account as an example.</p><p>The <code>Share</code> property of each creator in the <code>Creators</code> array is indicative. The Token Metadata program will ensure that the <code>Share</code> values of all creators add up to 100%, but it will not do anything with that information. Instead, it expects NFT marketplaces to use this information when distributing royalties.</p><p>On the other hand, the <code>Is Mutable</code> property is not indicative because the Token Metadata program will use that information internally to prevent immutable Metadata Accounts to be updated.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instructions">Instructions<a href="#instructions" class="hash-link" aria-label="Direct link to Instructions" title="Direct link to Instructions">​</a></h2><p>One can interact with a Program using the <strong>Instructions</strong> it provides. Multiple Instructions can be packed into a single <strong>Transaction</strong> that will be sent to the blockchain. Each Transaction is atomic meaning if any of its instructions fails, the whole Transaction will be reverted.</p><p>Similarly to Accounts, Instructions must be serialized into an array of bytes before they can be sent to the network. The data to be serialized must contain the following information for the Program to execute it.</p><ul><li><strong>Discriminator</strong>: Similarly to Accounts, Instructions are usually prefixed with a discriminator so the Program can identify which Instruction is being executed.</li><li><strong>Accounts</strong>: An array of Account addresses that are affected by this instruction. This can either be because the Account will be read, mutated or both. Note that the order of this array is important since Programs will identify the type of Account provided based on its position.</li><li><strong>Arguments</strong>: An array of data fields required by the instruction. It is not uncommon for this array to be empty since Instructions can get most of their information directly from the Accounts. Note that these arguments are comparable to the fields of an Account and, therefore, they can have the same properties mentioned above such as &quot;<a href="#optional-fields">optional</a>&quot; and &quot;<a href="#indicative-fields">indicative</a>&quot;.</li><li><strong>Signers</strong>: An array of signatures for a sub-set of the Accounts provided. This is only needed for Accounts that are required to sign the Instruction. The next section explains this in a bit more detail.</li></ul><p>📚 <strong>Additional reading</strong>:</p><ul><li><a href="https://docs.solana.com/developing/programming-model/transactions" target="_blank" rel="noopener noreferrer">Solana Documentation — Transactions</a></li><li><a href="https://docs.solana.com/developing/programming-model/transactions#instructions" target="_blank" rel="noopener noreferrer">Solana Documentation — Instructions</a></li><li><a href="https://solanacookbook.com/core-concepts/transactions.html" target="_blank" rel="noopener noreferrer">Solana Cookbook — Transactions</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="signer-andor-writable-accounts">Signer and/or Writable Accounts<a href="#signer-andor-writable-accounts" class="hash-link" aria-label="Direct link to Signer and/or Writable Accounts" title="Direct link to Signer and/or Writable Accounts">​</a></h3><p>A Program may require that the Accounts provided within an Instruction are <strong>Signers</strong> and/or <strong>Writable</strong>.</p><ul><li><strong>Signers</strong>: A Signer Account is required to sign the Transaction for the Instruction to be successful. By attaching a signature, users can prove that they are the owner of the Account.</li><li><strong>Writable</strong>: A Writable Account will be mutated by the Instruction. This information is important for the blockchain to know which Transactions can be run in parallel and which ones can&#x27;t.</li></ul><p>Therefore, with these two booleans, we end up with the following four possible scenarios:</p><ul><li><strong>Non-Signer and Non-Writable</strong>: This Account is only used to read data. We cannot mutate it and we cannot make any assumption about its ownership.</li><li><strong>Signer and Non-Writable</strong>: This Account can also not be mutated, but we know that the user who sent the Transaction owns its private key. This enables Programs to grant or deny access to certain actions.</li><li><strong>Signer and Writable</strong>: This Account has both signed the Transaction <em>and</em> it can be mutated by the Instruction. This combination is pretty common since Programs will usually require the owner of an Account to prove who they are before mutating that account. Otherwise, anyone could mutate any Account they don&#x27;t own.</li><li><strong>Non-Signer and Writable</strong>: This Account can be mutated, but we can&#x27;t make any assumption about its ownership. That usually means that the Program is using other Signer Accounts to prove they can mutate that one. This is also the case for PDA Accounts since they are owned by the Program and, as such, they require the Program to keep track of Authorities that can mutate them. Also, note that certain actions like crediting lamports to an Account do not require the Account to sign the Transaction.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cross-program-invocations-cpi">Cross-Program Invocations (CPI)<a href="#cross-program-invocations-cpi" class="hash-link" aria-label="Direct link to Cross-Program Invocations (CPI)" title="Direct link to Cross-Program Invocations (CPI)">​</a></h3><p>Cross-Program Invocations allow Programs to execute nested Instructions within their Instructions. They can use Instructions from their own Program and/or from other Programs.</p><p>📚 <strong>Additional reading</strong>:</p><ul><li><a href="https://docs.solana.com/developing/programming-model/calling-between-programs#cross-program-invocations" target="_blank" rel="noopener noreferrer">Solana Documentation — CPI</a></li><li><a href="https://book.anchor-lang.com/anchor_in_depth/CPIs.html" target="_blank" rel="noopener noreferrer">Using CPIs with Anchor Programs</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-diagrams">Understanding diagrams<a href="#understanding-diagrams" class="hash-link" aria-label="Direct link to Understanding diagrams" title="Direct link to Understanding diagrams">​</a></h2><p>Each Program&#x27;s documentation contains its fair share of diagrams to provide a visual representation of how their Accounts are structured and how they are affected by Instructions.</p><p>We try our best to provide a consistent visual language that is documented below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="accounts-1">Accounts<a href="#accounts-1" class="hash-link" aria-label="Direct link to Accounts" title="Direct link to Accounts">​</a></h3><ul><li><strong>Accounts are represented with blue rectangles</strong>. Each Account has a smaller grey rectangle below them to indicate which Program owns that Account.</li><li>Accounts belonging to the System Program are represented in purple to differentiate them from other Accounts more easily. These are typically &quot;Wallet Accounts&quot; or Accounts that have not yet been initialized by a Program.</li><li>Underneath the &quot;Owner&quot; rectangle, additional white rectangles can be used to display the data within the Account.</li><li><strong>Optional data attributes</strong> in these &quot;Data&quot; rectangles are written in <strong>italic</strong>.</li><li>In certain situations, we may use an equal sign <code>=</code> to <strong>show the value assigned</strong> to a data attribute.</li><li>In certain situations, we may <strong>highlight a data attribute in bold</strong> to bring more attention to it.</li></ul><p><img loading="lazy" src="/assets/images/Understanding-Programs-Diagrams-Accounts-e1bb8fede7c5889cae428a43555d5989.png#radius" width="2100" height="648" class="img_ev3q"></p><ul><li>Relationships between Accounts are <strong>represented with solid grey lines</strong>.</li><li>The Account that stores the relationship — by keeping track of the other Account&#x27;s address – has a little triangle at the end of the grey line.</li><li>When Accounts are represented with their data attributes, a dashed grey line is used instead to link the data attribute with the Account it points to.</li></ul><p><img loading="lazy" src="/assets/images/Understanding-Programs-Diagrams-Relationships-771c429edb7d4159590fd4ca1593379d.png#radius" width="2100" height="624" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pdas">PDAs<a href="#pdas" class="hash-link" aria-label="Direct link to PDAs" title="Direct link to PDAs">​</a></h3><ul><li><strong>PDA Accounts are represented with brown rectangles</strong> and PDA Addresses are displayed as brown rounded rectangles.</li><li>PDA Addresses point to the PDA Account that exists at their address.</li><li>Accounts that are used to derive a PDA Address point towards that PDA Address.</li><li>PDA Addresses sometimes list their seeds next to them. PID refers to the Program ID or public key. Seeds that are wrapped in double quotes are literals.</li></ul><p><img loading="lazy" src="/assets/images/Understanding-Programs-Diagrams-PDA-bf90b3d515277be08cb0c1713b5f2754.png#radius" width="2100" height="1392" class="img_ev3q"></p><p>Note that PDA Addresses can sometimes host different types of Accounts. For instance, the Edition PDA of an NFT can either host a Master Edition Account or an Edition Account based on whether the NFT is the original or not. In this case, PDA Addresses in diagrams can point to more than one PDA Account to show any of these Accounts can live at this address.</p><p><img loading="lazy" src="/assets/images/Understanding-Programs-Diagrams-PDA-Complex-8e1298f0de2312a6b7349936e8110828.png#radius" width="1836" height="720" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-1">Instructions<a href="#instructions-1" class="hash-link" aria-label="Direct link to Instructions" title="Direct link to Instructions">​</a></h3><ul><li><strong>Instructions are represented with pink skewed rectangles</strong> and point to the Accounts that they change.</li><li>Arrows pointing out of Instructions usually explain in what way the Instruction affects the Account.</li><li>Arrows can also point to data attributes inside Accounts to be slightly more specific.</li></ul><p><img loading="lazy" src="/assets/images/Understanding-Programs-Diagrams-Instructions-ede365eba25680556ee873f44e7b593b.png#radius" width="1847" height="408" class="img_ev3q"></p><p>Showing all Accounts required for an Instruction to be executed in a diagram would make the visual representation too messy and complicated to understand. However, certain diagrams will use arrows from Accounts to Instructions to highlight a subset of the Instruction&#x27;s required Accounts.</p><p><img loading="lazy" src="/assets/images/Understanding-Programs-Diagrams-Instructions-Complex-7ae7d61950bb103f22082abbc909c09c.png#radius" width="2136" height="936" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/metaplex/docs/tree/main/docs/01-programs/00-understanding-programs.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-08-06T17:39:35.000Z">Aug 6, 2023</time></b></span></div></div><div><div class="feedbackWidget"><h3>Was this page helpful?</h3><div class="widget_UOf8" data-hr-token="8c828a21-ead0-4998-b98b-f465fd3e4e4f" data-hr-resource="programs-understanding-programs" data-hr-styles="{&quot;grid&quot;:&quot;grid_uXr7&quot;,&quot;cell&quot;:&quot;cell_NyhG&quot;,&quot;reaction&quot;:&quot;reaction_jDJL&quot;,&quot;footer&quot;:&quot;footer_VuXo&quot;}" data-hr-strategy="instant"></div></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/programs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Programs</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/programs/token-metadata/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Token Metadata</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#accounts" class="table-of-contents__link toc-highlight">Accounts</a><ul><li><a href="#program-derived-addresses-pda" class="table-of-contents__link toc-highlight">Program Derived Addresses (PDA)</a></li><li><a href="#account-data" class="table-of-contents__link toc-highlight">Account data</a></li><li><a href="#discriminators" class="table-of-contents__link toc-highlight">Discriminators</a></li><li><a href="#field-types-sizes-and-offsets" class="table-of-contents__link toc-highlight">Field types, sizes and offsets</a></li><li><a href="#optional-fields" class="table-of-contents__link toc-highlight">Optional fields</a></li><li><a href="#indicative-fields" class="table-of-contents__link toc-highlight">Indicative fields</a></li></ul></li><li><a href="#instructions" class="table-of-contents__link toc-highlight">Instructions</a><ul><li><a href="#signer-andor-writable-accounts" class="table-of-contents__link toc-highlight">Signer and/or Writable Accounts</a></li><li><a href="#cross-program-invocations-cpi" class="table-of-contents__link toc-highlight">Cross-Program Invocations (CPI)</a></li></ul></li><li><a href="#understanding-diagrams" class="table-of-contents__link toc-highlight">Understanding diagrams</a><ul><li><a href="#accounts-1" class="table-of-contents__link toc-highlight">Accounts</a></li><li><a href="#pdas" class="table-of-contents__link toc-highlight">PDAs</a></li><li><a href="#instructions-1" class="table-of-contents__link toc-highlight">Instructions</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/metaplex" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/metaplex" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://solana.stackexchange.com/questions/tagged/metaplex" target="_blank" rel="noopener noreferrer" class="footer__link-item">StackExchange<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/metaplex-foundation/metaplex" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Powered by</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://happyreact.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Happy React<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Metaplex</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b61b5b2a.js"></script>
<script src="/assets/js/main.f9f50fc6.js"></script>
</body>
</html>