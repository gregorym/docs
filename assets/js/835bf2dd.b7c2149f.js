"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2908],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=l(n),d=a,m=h["".concat(c,".").concat(d)]||h[d]||p[d]||i;return n?o.createElement(m,r(r({ref:t},u),{},{components:n})):o.createElement(m,r({ref:t},u))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var l=2;l<i;l++)r[l]=n[l];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},38545:function(e,t,n){n.d(t,{Q:function(){return s},U:function(){return r}});var o=n(67294),a=n(45697),i=n.n(a);function r(e){let{children:t}=e;return o.createElement("div",{className:"accordion"},t)}function s(e){let{open:t,title:n,actions:a,keepAlive:i=!0,children:r}=e;const[s,l]=(0,o.useState)(t),u=s||i;return o.createElement("div",{className:["accordion-item",s?"accordion-item-opened":"accordion-item-closed"].join(" ")},o.createElement("div",{className:"accordion-item-header",onClick:()=>l(!s)},o.createElement("h3",null,o.createElement(c,{opened:s}),o.createElement("span",null,n)),a),o.createElement("div",{className:"accordion-item-content"},u&&r))}function c(e){let{opened:t}=e;return t?o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",fill:"currentColor",viewBox:"0 0 256 256"},o.createElement("rect",{width:"256",height:"256",fill:"none"}),o.createElement("path",{d:"M215.4,92.9A8,8,0,0,0,208,88H48a8,8,0,0,0-7.4,4.9,8.4,8.4,0,0,0,1.7,8.8l80,80a8.2,8.2,0,0,0,11.4,0l80-80A8.4,8.4,0,0,0,215.4,92.9Z"})):o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",fill:"currentColor",viewBox:"0 0 256 256"},o.createElement("rect",{width:"256",height:"256",fill:"none"}),o.createElement("path",{d:"M181.7,122.3l-80-80a8.4,8.4,0,0,0-8.8-1.7A8,8,0,0,0,88,48V208a8,8,0,0,0,4.9,7.4,8.5,8.5,0,0,0,3.1.6,8.3,8.3,0,0,0,5.7-2.3l80-80A8.1,8.1,0,0,0,181.7,122.3Z"}))}r.propTypes={children:i().any},s.propTypes={open:i().bool,title:i().string,children:i().any,actions:i().any,keepAlive:i().bool},c.propTypes={opened:i().bool}},93343:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return r},metadata:function(){return c},toc:function(){return u}});var o=n(83117),a=(n(67294),n(3905)),i=n(38545);const r={description:"Explains Auction House settings in great detail."},s="Auction House Settings",c={unversionedId:"programs/auction-house/auction-house-settings",id:"programs/auction-house/auction-house-settings",title:"Auction House Settings",description:"Explains Auction House settings in great detail.",source:"@site/docs/01-programs/03-auction-house/02-auction-house-settings.md",sourceDirName:"01-programs/03-auction-house",slug:"/programs/auction-house/auction-house-settings",permalink:"/programs/auction-house/auction-house-settings",draft:!1,editUrl:"https://github.com/metaplex/docs/tree/main/docs/01-programs/03-auction-house/02-auction-house-settings.md",tags:[],version:"current",lastUpdatedAt:1686920795,formattedLastUpdatedAt:"Jun 16, 2023",sidebarPosition:2,frontMatter:{description:"Explains Auction House settings in great detail."},sidebar:"sidebar",previous:{title:"Getting Started",permalink:"/programs/auction-house/getting-started"},next:{title:"Managing Auction Houses",permalink:"/programs/auction-house/managing-auction-house"}},l={},u=[{value:"Introduction",id:"introduction",level:2},{value:"The Authority",id:"the-authority",level:2},{value:"Trade Settings",id:"trade-settings",level:2},{value:"Helper Accounts",id:"helper-accounts",level:2},{value:"Require Sign Off",id:"require-sign-off",level:2},{value:"Can Change Sale Price",id:"can-change-sale-price",level:2},{value:"Auctioneer Settings",id:"auctioneer-settings",level:2},{value:"Conclusion",id:"conclusion",level:2}],p={toc:u};function h(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"auction-house-settings"},"Auction House Settings"),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"On this page, we will discuss settings that are available on an Auction House. These settings include some general settings that define how an Auction House operates, defination of some accounts (PDAs) that support the operation of the Auction House and some more specific settings that provide further configurability to the Auction House program."),(0,a.kt)("h2",{id:"the-authority"},"The Authority"),(0,a.kt)("p",null,"The authority is the wallet which controls the usage of an account, and in this case, the Auction House instance. The authority address can be be mentioned when creating an Auction House. If not mentioned, the wallet which is being used to create the Auction House defaults as the authority. "),(0,a.kt)("p",null,"The authority can also be transferred to another wallet after the creation of the Auction House, which transfers control of the Auction House. This action should be performed carefully."),(0,a.kt)("p",null,"Authority wallet also plays another important role of guarding which assets could be listed and sold on the marketplace. We'll talk more about this functionality of the authority when we discuss ",(0,a.kt)("a",{parentName:"p",href:"#requiresignoff"},(0,a.kt)("inlineCode",{parentName:"a"},"requireSignOff"))),(0,a.kt)(i.U,{mdxType:"Accordion"},(0,a.kt)(i.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,a.kt)("div",{className:"accordion-item-padding"},(0,a.kt)("p",null,"When using the JS SDK, the authority of a Auction House will always default to the wallet being used to create the Auction House. You may explicitly set this authority by providing a valid signer to the authority property."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'import { Keypair } from "@solana/web3.js";\n\nconst myCustomAuthority = Keypair.generate();\nconst auctionHouseSettings = {\n  authority: myCustomAuthority,\n};\n'))))),(0,a.kt)("h2",{id:"trade-settings"},"Trade Settings"),(0,a.kt)("p",null,"These are trading-specific settings that can be set on an Auction House. These settings help in defining how a user interacts with the marketplace:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"treasuryMint"),": This defines the mint account of the SPL-token to be used as the currency of exchange in the marketplace. Most marketplaces on Solana usually use SOL as the currency of exchange and for trading assets. Using this setting, the authority of the Auction House can set any SPL-token to be used to buy and sell assets on the given marketplace.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"sellerFeeBasisPoints"),": This defines the secondary sale royalties that a marketplace receives on each sale of every asset on the given marketplace. ",(0,a.kt)("inlineCode",{parentName:"p"},"250")," means ",(0,a.kt)("inlineCode",{parentName:"p"},"2.5%")," royalty share."))),(0,a.kt)(i.U,{mdxType:"Accordion"},(0,a.kt)(i.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,a.kt)("div",{className:"accordion-item-padding"},(0,a.kt)("p",null,"In this snippet we are creating an spl-token and setting it as the ",(0,a.kt)("inlineCode",{parentName:"p"},"treasuryMint")," of the Auction House. We are also setting the marketplace royalties using ",(0,a.kt)("inlineCode",{parentName:"p"},"sellerFeeBasisPoints"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"import { clusterApiUrl, Connection, Keypair } from \"@solana/web3.js\";\nimport { Token, TOKEN_PROGRAM_ID } from \"@solana/spl-token\";\n\nconst myKeypair = Keypair.generate();\nconst connection = new Connection(\n    clusterApiUrl('devnet'),\n    'confirmed',\n);\nconst myCustomToken = splToken.Token.createMint(connection, myKeypair, myKeypair.publicKey, null, 9, splToken.TOKEN_PROGRAM_ID)\nconst auctionHouseSettings = {\n    treasuryMint: myCustomToken,\n    sellerFeeBasisPoints: 150\n};\n"))))),(0,a.kt)("h2",{id:"helper-accounts"},"Helper Accounts"),(0,a.kt)("p",null,"There are several accounts that are necessary for the Auction House to function properly. Once set by the Auction House, the authority can reset and configure these accounts as per their liking."),(0,a.kt)("p",null,"There are some accounts that are created and controlled by the Auction House program. These accounts are Program Derived Addresses (PDAs) which you can read more about ",(0,a.kt)("a",{parentName:"p",href:"https://solanacookbook.com/core-concepts/pdas.html"},"here"),". These are the two settings that can be used to set these accounts:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"auctionHouseFeeAccount"),": The public key of the fee account which stores funds for paying for Auction House related transactions on behalf of the users. ")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"auctionHouseTreasury"),": The public key of the treasury account which stores the funds received on every sale, as marketplace royalty."))),(0,a.kt)("p",null,"There are other accounts that are not created by the Auction House program, but are essential for withdrawing different types of funds from the Auction House, back to the authority:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"feeWithdrawalDestination"),": The public key of the account to which the funds can be withdrawn from the fee account. ")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"treasuryWithdrawalDestination"),": The public key of the account to which the funds can be withdrawn from the treasury account."))),(0,a.kt)(i.U,{mdxType:"Accordion"},(0,a.kt)(i.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,a.kt)("div",{className:"accordion-item-padding"},(0,a.kt)("p",null,"The following code snippet builds four different keypairs, corresponding to the four accounts discussed above and sets them."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'import { Keypair } from "@solana/web3.js";\n\nconst feeAccount = Keypair.generate();\nconst treasuryAccount = Keypair.generate();\nconst feeWithdrawalDestination = Keypair.generate();\nconst treasuryWithdrawalDestination = Keypair.generate();\nconst auctionHouseSettings = {\n    auctionHouseFeeAccount: feeAccount,\n    auctionHouseTreasury: treasuryAccount,\n    feeWithdrawalDestination: feeWithdrawalDestination,\n    treasuryWithdrawalDestination: treasuryWithdrawalDestination,\n};\n'))))),(0,a.kt)("h2",{id:"require-sign-off"},"Require Sign Off"),(0,a.kt)("p",null,"This setting allows marketplaces to gate asset listing and sales. As discussed in the authority section, the Auction House authority plays a role in the gating of assets. This censorship or centralised control can only take place when ",(0,a.kt)("inlineCode",{parentName:"p"},"requireSignOff = true"),"."),(0,a.kt)("p",null,"When this happens, every transaction on the marketplace: listing, bidding and execution of sales needs to be signed by the Auction House authority. Fully decentralised marketplaces can choose to keep the ",(0,a.kt)("inlineCode",{parentName:"p"},"requireSignOff")," setting as ",(0,a.kt)("inlineCode",{parentName:"p"},"false")," to avoid censorship or centralised control of actions on that marketplace. "),(0,a.kt)("p",null,"Setting ",(0,a.kt)("inlineCode",{parentName:"p"},"requireSignOff = true")," has other powers as well: it allows marketplaces to implement their own custom order matching algorithms. We will talk more about this in the next section."),(0,a.kt)(i.U,{mdxType:"Accordion"},(0,a.kt)(i.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,a.kt)("div",{className:"accordion-item-padding"},(0,a.kt)("p",null,"The following code snippet sets ",(0,a.kt)("inlineCode",{parentName:"p"},"requireSignOff")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"const auctionHouseSettings = {\n    requireSignOff: true\n};\n"))))),(0,a.kt)("h2",{id:"can-change-sale-price"},"Can Change Sale Price"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"canChangeSalePrice"),' allows marketplaces to change the sale price of an asset, when a user intentionally lists an asset for free, or for 0 SOL (or any other SPL-token). By listing the asset for 0 SOL, the user allows marketplaces to apply custom matching algorithms in order to find the best price match for the "freely" listed asset.'),(0,a.kt)("p",null,"An important point to note here is that ",(0,a.kt)("inlineCode",{parentName:"p"},"canChangeSalePrice")," can be set to ",(0,a.kt)("inlineCode",{parentName:"p"},"true")," only if ",(0,a.kt)("inlineCode",{parentName:"p"},"requireSignOff")," is also set to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),'. This is because custom matching is not possible in the case of permissionless listing and bidding. The Auction House should be able to "sign off" on a matching bid and execute the sale of the asset.'),(0,a.kt)(i.U,{mdxType:"Accordion"},(0,a.kt)(i.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,a.kt)("div",{className:"accordion-item-padding"},(0,a.kt)("p",null,"The following code snippet sets ",(0,a.kt)("inlineCode",{parentName:"p"},"canChangeSalePrice")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),", while also ensuring that ",(0,a.kt)("inlineCode",{parentName:"p"},"requireSignOff")," is also ",(0,a.kt)("inlineCode",{parentName:"p"},"true")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"const auctionHouseSettings = {\n    requireSignOff: true,\n    canChangeSalePrice: true\n};\n"))))),(0,a.kt)("h2",{id:"auctioneer-settings"},"Auctioneer Settings"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Auctioneer")," account is a PDA which uses the composability pattern of the Auction House program to control an Auction House Instance."),(0,a.kt)("p",null,"The Auctioneer has the ability to be given the control, or Delegation over an Auction House instance using the ",(0,a.kt)("inlineCode",{parentName:"p"},"DelegateAuctioneer")," instruction which we will discuss in the Auctioneer guide (",(0,a.kt)("em",{parentName:"p"},"comming soon"),")."),(0,a.kt)("p",null,"There are three setting pertaining to the Auctioneer which can be configured in the Auction House:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"hasAuctioneer"),": True if an ",(0,a.kt)("inlineCode",{parentName:"li"},"Auctioneer")," instance exists for the given Auction House instance."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"auctioneerAuthority"),": The Auctioneer authority key. It is required when the Auction House is going to have Auctioneer enabled."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"auctioneerScopes"),": The list of scopes available to the user in the Auctioneer, for example: Bid, List, Execute Sale. It only takes place when the Auction House has Auctioneer enabled.")),(0,a.kt)(i.U,{mdxType:"Accordion"},(0,a.kt)(i.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,a.kt)("div",{className:"accordion-item-padding"},(0,a.kt)("p",null,"The following code snippet sets ",(0,a.kt)("inlineCode",{parentName:"p"},"hasAuctioneer")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),". It also points the ",(0,a.kt)("inlineCode",{parentName:"p"},"auctioneerAuthority")," to a generated public key and sets ",(0,a.kt)("inlineCode",{parentName:"p"},"auctioneerScopes")," to allow the Auctioneer to buy, sell and excecute the sale on behalf of the Auction House."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"import { Keypair } from \"@solana/web3.js\";\nimport { AuthorityScope } from '@metaplex-foundation/mpl-auction-house';\n\nconst newAuthority = Keypair.generate();\nconst auctionHouseSettings = {\n    hasAuctioneer: true,\n    auctioneerAuthority: newAuthority,\n    auctioneerScopes: [\n        AuthorityScope.Buy,\n        AuthorityScope.Sell,\n        AuthorityScope.ExecuteSale,\n    ]\n};\n"))))),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"Now that we know about Auction House settings, on the ",(0,a.kt)("a",{parentName:"p",href:"/programs/auction-house/managing-auction-house"},"next page"),", we\u2019ll see how we can use them to create and update our own Auction House."))}h.isMDXComponent=!0}}]);