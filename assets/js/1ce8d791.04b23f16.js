"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6847],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return m}});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},s=Object.keys(e);for(i=0;i<s.length;i++)t=s[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)t=s[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=i.createContext({}),l=function(e){var n=i.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=l(e.components);return i.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},p=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,c=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),p=l(t),m=a,f=p["".concat(c,".").concat(m)]||p[m]||u[m]||s;return t?i.createElement(f,o(o({ref:n},d),{},{components:t})):i.createElement(f,o({ref:n},d))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,o=new Array(s);o[0]=p;var r={};for(var c in n)hasOwnProperty.call(n,c)&&(r[c]=n[c]);r.originalType=e,r.mdxType="string"==typeof e?e:a,o[1]=r;for(var l=2;l<s;l++)o[l]=t[l];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}p.displayName="MDXCreateElement"},38545:function(e,n,t){t.d(n,{Q:function(){return r},U:function(){return o}});var i=t(67294),a=t(45697),s=t.n(a);function o(e){let{children:n}=e;return i.createElement("div",{className:"accordion"},n)}function r(e){let{open:n,title:t,actions:a,keepAlive:s=!0,children:o}=e;const[r,l]=(0,i.useState)(n),d=r||s;return i.createElement("div",{className:["accordion-item",r?"accordion-item-opened":"accordion-item-closed"].join(" ")},i.createElement("div",{className:"accordion-item-header",onClick:()=>l(!r)},i.createElement("h3",null,i.createElement(c,{opened:r}),i.createElement("span",null,t)),a),i.createElement("div",{className:"accordion-item-content"},d&&o))}function c(e){let{opened:n}=e;return n?i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",fill:"currentColor",viewBox:"0 0 256 256"},i.createElement("rect",{width:"256",height:"256",fill:"none"}),i.createElement("path",{d:"M215.4,92.9A8,8,0,0,0,208,88H48a8,8,0,0,0-7.4,4.9,8.4,8.4,0,0,0,1.7,8.8l80,80a8.2,8.2,0,0,0,11.4,0l80-80A8.4,8.4,0,0,0,215.4,92.9Z"})):i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",fill:"currentColor",viewBox:"0 0 256 256"},i.createElement("rect",{width:"256",height:"256",fill:"none"}),i.createElement("path",{d:"M181.7,122.3l-80-80a8.4,8.4,0,0,0-8.8-1.7A8,8,0,0,0,88,48V208a8,8,0,0,0,4.9,7.4,8.5,8.5,0,0,0,3.1.6,8.3,8.3,0,0,0,5.7-2.3l80-80A8.1,8.1,0,0,0,181.7,122.3Z"}))}o.propTypes={children:s().any},r.propTypes={open:s().bool,title:s().string,children:s().any,actions:s().any,keepAlive:s().bool},c.propTypes={opened:s().bool}},66143:function(e,n,t){t.r(n),t.d(n,{assets:function(){return l},contentTitle:function(){return r},default:function(){return p},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return d}});var i=t(83117),a=(t(67294),t(3905)),s=t(38545);const o={description:"Explains how to find bids, listings and sales."},r="Finding bids, listings and sales",c={unversionedId:"programs/auction-house/finding-bids-listings-and-sales",id:"programs/auction-house/finding-bids-listings-and-sales",title:"Finding bids, listings and sales",description:"Explains how to find bids, listings and sales.",source:"@site/docs/01-programs/03-auction-house/07-finding-bids-listings-and-sales.md",sourceDirName:"01-programs/03-auction-house",slug:"/programs/auction-house/finding-bids-listings-and-sales",permalink:"/programs/auction-house/finding-bids-listings-and-sales",draft:!1,editUrl:"https://github.com/metaplex/docs/tree/main/docs/01-programs/03-auction-house/07-finding-bids-listings-and-sales.md",tags:[],version:"current",lastUpdatedAt:1694190861,formattedLastUpdatedAt:"Sep 8, 2023",sidebarPosition:7,frontMatter:{description:"Explains how to find bids, listings and sales."},sidebar:"sidebar",previous:{title:"Auction House Receipts",permalink:"/programs/auction-house/auction-house-receipts"},next:{title:"How-To Guides",permalink:"/programs/auction-house/how-to-guides"}},l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Find All in an Auction House",id:"find-all-in-an-auction-house",level:3},{value:"Find by Receipt",id:"find-by-receipt",level:3},{value:"Find by Trade State",id:"find-by-trade-state",level:3},{value:"Conclusion",id:"conclusion",level:2}],u={toc:d};function p(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,i.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"finding-bids-listings-and-sales"},"Finding bids, listings and sales"),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"In the previous page we saw how to make receipts for bids, listings and sales. These receipts make it easier for the marketplace operators to keep track of these actions. But how does one fetch these bids, listings and sales?"),(0,a.kt)(s.U,{mdxType:"Accordion"},(0,a.kt)(s.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,a.kt)("div",{className:"accordion-item-padding"},(0,a.kt)("p",null,"There are three types of functions provided for fetching bids, listings and sales:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Find all in an auction house"),": using this type of function, all bids / listings / sales can be found for a given Auction House.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Find by receipt"),": using this type of function, a single bid / listing / sale can be found, given the address of the corresponding receipt account.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Find by trade state"),": We talked about ",(0,a.kt)("a",{parentName:"p",href:"/programs/auction-house/overview"},"Trade States in the overview page"),". Trade state PDA accounts encoding the bid / listing / sale orders can also be used to find the corresponding action.")))))),(0,a.kt)("h3",{id:"find-all-in-an-auction-house"},"Find All in an Auction House"),(0,a.kt)(s.U,{mdxType:"Accordion"},(0,a.kt)(s.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,a.kt)("div",{className:"accordion-item-padding"},(0,a.kt)("p",null,"There are multiple criteria to find all bids, listings and sales (or ",(0,a.kt)("em",{parentName:"p"},"purchases"),") in an Auction House."),(0,a.kt)("p",null,"Below is the snippet for finding bids by multiple criteria. You can use any combination of keys."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// Find all bids in an Auction House.\nconst bids = await metaplex\n  .auctionHouse()\n  .findBids({ auctionHouse });\n\n// Find bids by buyer and mint.\nconst bids = await metaplex\n  .auctionHouse()\n  .findBids({ auctionHouse, buyer, mint });\n\n// Find bids by metadata.\nconst bids = await metaplex\n  .auctionHouse()\n  .findBids({ auctionHouse, metadata });\n")),(0,a.kt)("p",null,"Here's a snippet for finding listings by multiple criteria. Again, you can use any combination of keys."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// Find all listings in an Auction House.\nconst listings = await metaplex\n  .auctionHouse()\n  .findListings({ auctionHouse });\n\n// Find listings by seller and mint.\nconst listings = await metaplex\n  .auctionHouse()\n  .findListings({ auctionHouse, seller, mint });\n")),(0,a.kt)("p",null,"Below is a snippet for finding purchases by multiple criteria. It supports only 3 criteria at the same time including the required ",(0,a.kt)("inlineCode",{parentName:"p"},"auctionHouse")," attribute."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"// Find all purchases in an Auction House.\nconst purchases = await metaplex\n  .auctionHouse()\n  .findPurchases({ auctionHouse });\n\n// Find purchases by buyer and mint.\nconst purchases = await metaplex\n  .auctionHouse()\n  .findPurchases({ auctionHouse, buyer, mint });\n\n// Find purchases by metadata.\nconst purchases = await metaplex\n  .auctionHouse()\n  .findPurchases({ auctionHouse, metadata });\n\n// Find purchases by seller and buyer.\nconst purchases = await metaplex\n  .auctionHouse()\n  .findPurchases({ auctionHouse, seller, buyer });\n"))))),(0,a.kt)("h3",{id:"find-by-receipt"},"Find by Receipt"),(0,a.kt)(s.U,{mdxType:"Accordion"},(0,a.kt)(s.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,a.kt)("div",{className:"accordion-item-padding"},(0,a.kt)("p",null,"Below is the snippet for finding bids, listings and sales by corresponding receipt acccount address."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// Find a bid by receipt\nconst nft = await metaplex\n  .auctionHouse()\n  .findBidByReceipt({ receiptAddress, auctionHouse };\n\n// Find a listing by receipt\nconst nft = await metaplex\n  .auctionHouse()\n  .findListingByReceipt({ receiptAddress, auctionHouse };\n\n// Find a sale / purchase by receipt\nconst nft = await metaplex\n  .auctionHouse()\n  .findPurchaseByReceipt({ receiptAddress, auctionHouse };\n"))))),(0,a.kt)("h3",{id:"find-by-trade-state"},"Find by Trade State"),(0,a.kt)(s.U,{mdxType:"Accordion"},(0,a.kt)(s.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,a.kt)("div",{className:"accordion-item-padding"},(0,a.kt)("p",null,"Below is the snippet for finding bids, listings and sales by corresponding trade state PDA accounts."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// Find a bid by trade state\nconst nft = await metaplex\n  .auctionHouse()\n  .findBidByTradeState({ tradeStateAddress, auctionHouse };\n\n// Find a listing by trade state\nconst nft = await metaplex\n  .auctionHouse()\n  .findListingByTradeState({ tradeStateAddress, auctionHouse };\n\n// Find a sale / purchase by trade state\nconst nft = await metaplex\n  .auctionHouse()\n  .findPurchaseByTradeState({ sellerTradeState, buyerTradeState, auctionHouse };\n"))))),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"We have finally covered all corners for managing trading on a marketplace. Everything covered till now was explained using code snippets using the JS SDK. "),(0,a.kt)("p",null,"Next up we'll see how one can create and manage Auction Houses and the trading on them ",(0,a.kt)("a",{parentName:"p",href:"/programs/auction-house/how-to-guides/manage-auction-house-using-cli"},"using CLI"),"."))}p.isMDXComponent=!0}}]);