"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1026],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var i=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),l=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=l(e.components);return i.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=l(n),h=r,m=d["".concat(s,".").concat(h)]||d[h]||u[h]||o;return n?i.createElement(m,a(a({ref:t},p),{},{components:n})):i.createElement(m,a({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,a[1]=c;for(var l=2;l<o;l++)a[l]=n[l];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},38545:function(e,t,n){n.d(t,{Q:function(){return c},U:function(){return a}});var i=n(67294),r=n(45697),o=n.n(r);function a(e){let{children:t}=e;return i.createElement("div",{className:"accordion"},t)}function c(e){let{open:t,title:n,actions:r,keepAlive:o=!0,children:a}=e;const[c,l]=(0,i.useState)(t),p=c||o;return i.createElement("div",{className:["accordion-item",c?"accordion-item-opened":"accordion-item-closed"].join(" ")},i.createElement("div",{className:"accordion-item-header",onClick:()=>l(!c)},i.createElement("h3",null,i.createElement(s,{opened:c}),i.createElement("span",null,n)),r),i.createElement("div",{className:"accordion-item-content"},p&&a))}function s(e){let{opened:t}=e;return t?i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",fill:"currentColor",viewBox:"0 0 256 256"},i.createElement("rect",{width:"256",height:"256",fill:"none"}),i.createElement("path",{d:"M215.4,92.9A8,8,0,0,0,208,88H48a8,8,0,0,0-7.4,4.9,8.4,8.4,0,0,0,1.7,8.8l80,80a8.2,8.2,0,0,0,11.4,0l80-80A8.4,8.4,0,0,0,215.4,92.9Z"})):i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",fill:"currentColor",viewBox:"0 0 256 256"},i.createElement("rect",{width:"256",height:"256",fill:"none"}),i.createElement("path",{d:"M181.7,122.3l-80-80a8.4,8.4,0,0,0-8.8-1.7A8,8,0,0,0,88,48V208a8,8,0,0,0,4.9,7.4,8.5,8.5,0,0,0,3.1.6,8.3,8.3,0,0,0,5.7-2.3l80-80A8.1,8.1,0,0,0,181.7,122.3Z"}))}a.propTypes={children:o().any},c.propTypes={open:o().bool,title:o().string,children:o().any,actions:o().any,keepAlive:o().bool},s.propTypes={opened:o().bool}},99189:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return c},default:function(){return d},frontMatter:function(){return a},metadata:function(){return s},toc:function(){return p}});var i=n(83117),r=(n(67294),n(3905)),o=n(38545);const a={description:"Explains how to generate Auction House receipts."},c="Auction House Receipts",s={unversionedId:"programs/auction-house/auction-house-receipts",id:"programs/auction-house/auction-house-receipts",title:"Auction House Receipts",description:"Explains how to generate Auction House receipts.",source:"@site/docs/01-programs/03-auction-house/06-auction-house-receipts.md",sourceDirName:"01-programs/03-auction-house",slug:"/programs/auction-house/auction-house-receipts",permalink:"/programs/auction-house/auction-house-receipts",draft:!1,editUrl:"https://github.com/metaplex/docs/tree/main/docs/01-programs/03-auction-house/06-auction-house-receipts.md",tags:[],version:"current",lastUpdatedAt:1694190861,formattedLastUpdatedAt:"Sep 8, 2023",sidebarPosition:6,frontMatter:{description:"Explains how to generate Auction House receipts."},sidebar:"sidebar",previous:{title:"Managing Buyer Escrow Account",permalink:"/programs/auction-house/managing-buyer-account"},next:{title:"Finding bids, listings and sales",permalink:"/programs/auction-house/finding-bids-listings-and-sales"}},l={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Printing Receipts",id:"printing-receipts",level:2},{value:"Conclusion",id:"conclusion",level:2}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"auction-house-receipts"},"Auction House Receipts"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"To aid transaction / activity tracking on marketplaces, the Auction House program supports the generation of receipts for listings, bids and sales."),(0,r.kt)("p",null,"In addition to printing receipts, Auction House cancels receipts when the corresponding instruction (bid, listing or sale) is cancelled."),(0,r.kt)("p",null,"Let us see how receipts are printed."),(0,r.kt)("h2",{id:"printing-receipts"},"Printing Receipts"),(0,r.kt)("p",null,"To generate these receipts, the receipt printing function should be called immediately after the corresponding transaction (",(0,r.kt)("inlineCode",{parentName:"p"},"PrintListingReceipt"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"PrintBidReceipt"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"PrintPurchaseReceipt"),")."),(0,r.kt)("p",null,"Additionally, the ",(0,r.kt)("inlineCode",{parentName:"p"},"CancelListingReceipt "),"and ",(0,r.kt)("inlineCode",{parentName:"p"},"CancelBidReceipt")," instructions should be called in the case of canceled listings and bids. Calling these two instructions will fill the ",(0,r.kt)("inlineCode",{parentName:"p"},"canceled_at")," fields of the ",(0,r.kt)("inlineCode",{parentName:"p"},"ListingReceipt")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"BidReceipt")," accounts."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"While the receipts can be retrieved using the standard getProgramAccounts data flow, the official recommendation is to use Solana's AccountsDB plug-in to index and track the generated receipts.")),(0,r.kt)(o.U,{mdxType:"Accordion"},(0,r.kt)(o.Q,{title:"JS SDK",open:!0,mdxType:"AccordionItem"},(0,r.kt)("div",{className:"accordion-item-padding"},(0,r.kt)("p",null,"There are two fields that can be introduced to each function above to print the corresponding receipt:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"printReceipt"),": This is a boolean field that defaults to ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),". When this field is set to ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),", a receipt is printed for the corresponding function.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"bookkeeper"),": The address of the bookkeeper wallet responsible for the receipt. In other words, the bookeeper is the wallet that paid for the receipt. It's only responsibility at this time is tracking the payer of the receipt so that in the future if the account is allowed to be closed the program knows who should be refunded for the rent. This field defaults to ",(0,r.kt)("inlineCode",{parentName:"p"},"metaplex.identity()"),"."))),(0,r.kt)("p",null,"Here's an example of printing receipts for bid, list and execute sale instructions."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// printing the ListReceipt\nawait metaplex\n    .auctionHouse()\n    .createListing({\n        printReceipt: true,\n        bookkeeper: metaplex.identity()\n    })\n\n// printing the BidReceipt\nawait metaplex\n    .auctionHouse()\n    .createBid({\n        printReceipt: true,\n        bookkeeper: metaplex.identity()\n    })\n\n// printing the PurchaseReceipt\nawait metaplex\n    .auctionHouse()\n    .executeSale({\n        printReceipt: true,\n        bookkeeper: metaplex.identity()\n    })\n"))))),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"Now that we know how to print receipts for easy transaction tracking, how do we actually fetch details regarding these actions in practice? Let us explore ways to find bids, listings and sales for an Auction House in the ",(0,r.kt)("a",{parentName:"p",href:"/programs/auction-house/finding-bids-listings-and-sales"},"next page"),"."))}d.isMDXComponent=!0}}]);