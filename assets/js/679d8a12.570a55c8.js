"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[445],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return u}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(n),u=i,h=m["".concat(l,".").concat(u)]||m[u]||d[u]||r;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},81132:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return o},default:function(){return d},frontMatter:function(){return r},metadata:function(){return s},toc:function(){return p}});var a=n(83117),i=(n(67294),n(3905));const r={},o="Candy Machine Settings",s={unversionedId:"developer-tools/sugar/learning/settings",id:"developer-tools/sugar/learning/settings",title:"Candy Machine Settings",description:"Gatekeeper Settings",source:"@site/docs/03-developer-tools/00-sugar/04-learning/settings.md",sourceDirName:"03-developer-tools/00-sugar/04-learning",slug:"/developer-tools/sugar/learning/settings",permalink:"/developer-tools/sugar/learning/settings",draft:!1,editUrl:"https://github.com/metaplex/docs/tree/main/docs/03-developer-tools/00-sugar/04-learning/settings.md",tags:[],version:"current",lastUpdatedAt:1688850064,formattedLastUpdatedAt:"Jul 8, 2023",frontMatter:{},sidebar:"sidebar",previous:{title:"Learning",permalink:"/developer-tools/sugar/learning/"},next:{title:"Upload Methods",permalink:"/developer-tools/sugar/learning/upload_methods"}},l={},p=[{value:"Gatekeeper Settings",id:"gatekeeper-settings",level:2},{value:"Provider Networks",id:"provider-networks",level:3},{value:"Civic Captcha Pass",id:"civic-captcha-pass",level:4},{value:"Verify by Encore",id:"verify-by-encore",level:4},{value:"Hidden Settings",id:"hidden-settings",level:2},{value:"End Settings",id:"end-settings",level:2},{value:"Whitelist Settings",id:"whitelist-settings",level:2},{value:"Freeze Settings",id:"freeze-settings",level:2}],c={toc:p};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"candy-machine-settings"},"Candy Machine Settings"),(0,i.kt)("h2",{id:"gatekeeper-settings"},"Gatekeeper Settings"),(0,i.kt)("p",null,"Candy Machine V2 has a pseudo-random mint order to which provides some protection against bots, however bots are still able to mint directly from the Candy Machine. If you want to make sure that only humans can mint from your project, you can enable the gatekeeper settings in your ",(0,i.kt)("inlineCode",{parentName:"p"},"config.json")," with the following values:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"gatekeeper": {\n    "gatekeeperNetwork" : "<PROVIDER NETWORK ADDRESS>",\n    "expireOnUse" : true\n}\n')),(0,i.kt)("p",null,"This will enable a gatekeeper challenge once the mint button is clicked","\u2014","only after passing the challenge you will be allowed to mint."),(0,i.kt)("p",null,"When you use a gatekeeper, you will not be able to mint from the CLI command ",(0,i.kt)("inlineCode",{parentName:"p"},"sugar mint"),". If you want to pre-mint from a ",(0,i.kt)("inlineCode",{parentName:"p"},"CMv2")," and are planning to use a gatekeeper, you should set the ",(0,i.kt)("inlineCode",{parentName:"p"},"goLiveDate")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"null")," and turn ",(0,i.kt)("inlineCode",{parentName:"p"},"gatekeeper")," (temporarily) off. This will allow you to mint from the command line, but only ",(0,i.kt)("strong",{parentName:"p"},"you")," as the ",(0,i.kt)("inlineCode",{parentName:"p"},"CMv2")," authority. Once you complete the pre-mint, turn ",(0,i.kt)("inlineCode",{parentName:"p"},"gatekeeper")," on and set the correct ",(0,i.kt)("inlineCode",{parentName:"p"},"goLiveDate"),"."),(0,i.kt)("admonition",{type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"If your Candy Machine is ",(0,i.kt)("strong",{parentName:"p"},"live")," and it has ",(0,i.kt)("strong",{parentName:"p"},"no gatekeeper"),", it is open to bots attacks. The pseudo-random mint index only prevents knowing which item to mint, but bots can still snipe a large volume of items.")),(0,i.kt)("h3",{id:"provider-networks"},"Provider Networks"),(0,i.kt)("p",null,"There are currently two supported gatekeepers (details below). If you want to become a supported gatekeeper please email ",(0,i.kt)("a",{parentName:"p",href:"mailto:contact@identity.org"},"contact@identity.org"),"."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",{parentName:"p",href:"https://docs.identity.com/docs/overview"},"Learn more about the Identity Gateway Protocol"))),(0,i.kt)("h4",{id:"civic-captcha-pass"},"Civic Captcha Pass"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Address: ",(0,i.kt)("inlineCode",{parentName:"p"},"ignREusXmGrscGNUesoU9mxfds9AiYTezUKex2PsZV6"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Recommended"),": maintain ",(0,i.kt)("inlineCode",{parentName:"p"},"expireOnUse: true"),". Changing this setting increases the susceptibility of your project to bots."),(0,i.kt)("p",null,"Brings the familiar captcha challenge to web3 and combines it with user-transparent heuristics to protect your mint from bots."),(0,i.kt)("p",null,"With captcha enabled, a user will be issued a Civic Captcha Pass after successfully completing the captcha challenge and automatically checked by the Candy Machine prior to minting."),(0,i.kt)("p",null,"A Civic Captcha Pass remains active only for 10 minutes and for one mint to limit the options of malicious botters verifying multiple wallets. If a user tries to use an inactive pass, it will automatically prompt them to refresh it."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.civic.com/candy-machine-integration/adding-captcha-to-candy-machine-v2"},"Learn More")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.civic.com/candy-machine-integration/adding-captcha-to-candy-machine-v2#terms-and-conditions"},"Civic Ts&Cs"))),(0,i.kt)("h4",{id:"verify-by-encore"},"Verify by Encore"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Address: ",(0,i.kt)("inlineCode",{parentName:"p"},"tibePmPaoTgrs929rWpu755EXaxC7M3SthVCf6GzjZt"))),(0,i.kt)("p",null,"A web3 alternative to captcha that uses randomized challenge-response tests to filter out bots."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://encorefans.notion.site/Verify-0af40ff4b3324694abf336f185c9fad2"},"Learn More")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.encore.fans/terms-conditions"},"Encore Ts&Cs"))),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"By using a gatekeeper, you agree to their terms and conditions.")),(0,i.kt)("h2",{id:"hidden-settings"},"Hidden Settings"),(0,i.kt)("p",null,"Hidden settings serve two purposes. First, it allows the creation of larger drops (20k+), since the metadata is not stored on-chain. In turn, this also allows the creation of hide-and-reveal drops, where users discover which item(s) they minted after the mint is complete."),(0,i.kt)("p",null,"To enable hidden settings, you need to provide the details for the ",(0,i.kt)("em",{parentName:"p"},"hiddenSettings")," in your ",(0,i.kt)("inlineCode",{parentName:"p"},"config.json"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"hiddenSettings": {\n    "name":"My Hidden Collection #$ID+1$",\n    "uri": <place_holder_uri>,\n    "hash":""\n}\n')),(0,i.kt)("p",null,"For the full details on Hidden Settings see the Candy Machine docs ",(0,i.kt)("a",{parentName:"p",href:"https://docs.metaplex.com/programs/candy-machine/candy-machine-settings#hidden-settings"},"here"),"."),(0,i.kt)("p",null,"Your unrevealed name can be different than the final names of your assets in the JSON metadata folder. E.g. your name pattern in the hidden settings configuration could be ",(0,i.kt)("inlineCode",{parentName:"p"},'"My Unrevealed NFT #$ID+1$"')," whereas your assets in the assets folder could have the naming pattern ",(0,i.kt)("inlineCode",{parentName:"p"},"Revealed NFT #1"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Revealed NFT #2"),', etc. If your NFT names start at "1" you should use the ',(0,i.kt)("inlineCode",{parentName:"p"},"$ID+1$")," variable in the ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),' field. If your NFT names start at "0" you should use the ',(0,i.kt)("inlineCode",{parentName:"p"},"$ID$")," variable in the ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," field."),(0,i.kt)("p",null,"Examples:"),(0,i.kt)("p",null,"A NFT Collection with the naming convention: ",(0,i.kt)("inlineCode",{parentName:"p"},'"My NFT #1"'),", ",(0,i.kt)("inlineCode",{parentName:"p"},'"My NFT #2"'),", ",(0,i.kt)("inlineCode",{parentName:"p"},'"My NFT #3"'),", etc. should use the ",(0,i.kt)("inlineCode",{parentName:"p"},"$ID+1$")," pattern:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"hiddenSettings": {\n    "name":"My NFT #$ID+1$",\n    . . .\n}\n')),(0,i.kt)("p",null,"A NFT Collection with the naming convention: ",(0,i.kt)("inlineCode",{parentName:"p"},'"My NFT #0"'),", ",(0,i.kt)("inlineCode",{parentName:"p"},'"My NFT #1"'),", ",(0,i.kt)("inlineCode",{parentName:"p"},'"My NFT #2"'),", etc. should use the ",(0,i.kt)("inlineCode",{parentName:"p"},"$ID$")," pattern:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"hiddenSettings": {\n    "name":"My NFT #$ID$",\n    . . .\n')),(0,i.kt)("p",null,"A NFT Collection with the naming convention: ",(0,i.kt)("inlineCode",{parentName:"p"},'"My NFT1"'),", ",(0,i.kt)("inlineCode",{parentName:"p"},'"My NFT2"'),", ",(0,i.kt)("inlineCode",{parentName:"p"},'"My NFT3"'),", etc. should use also use the ",(0,i.kt)("inlineCode",{parentName:"p"},"$ID+1$")," pattern:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"hiddenSettings": {\n    "name":"My NFT$ID+1$",\n    . . .\n}\n')),(0,i.kt)("h2",{id:"end-settings"},"End Settings"),(0,i.kt)("p",null,"End Settings provide a mechanism to stop the mint if a certain condition is met without interaction. There are two conditions that can be specified."),(0,i.kt)("p",null,"Stop a mint at a specific timestamp (e.g., at the end of a specific day):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"endSettings": {\n    "endSettingType": "Date",,\n    "date": "25 Dec 2021 23:59:00 +0000"\n}\n')),(0,i.kt)("p",null,"Stop a mint after a certain number of items have been minted (e.g., 10 items minted):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"endSettings": {\n    "endSettingType": "Amount",\n    "number": 10\n}\n')),(0,i.kt)("p",null,"This can be used in combination with other settings to create specific use cases. For example, you can run a whitelist presale either for a limited time or for a limited number of items; you can specify your sale period to be between the ",(0,i.kt)("inlineCode",{parentName:"p"},"goLiveDate")," and the ",(0,i.kt)("inlineCode",{parentName:"p"},"endSettings"),"'s ",(0,i.kt)("inlineCode",{parentName:"p"},"date"),"."),(0,i.kt)("h2",{id:"whitelist-settings"},"Whitelist Settings"),(0,i.kt)("p",null,"Whitelist settings provide a variety of different use cases and revolve around the idea of using custom SPL tokens to offer special rights to token holders - how said SPL token is distributed is up to you. We will discuss a few scenarios below."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"In all the examples below, you will need to change the ",(0,i.kt)("inlineCode",{parentName:"p"},"mint")," settings address ",(0,i.kt)("inlineCode",{parentName:"p"},"7nE1GmnMmDKiycFkpHF7mKtxt356FQzVonZqBWsTWZNf")," with the mint address of your SPL token.")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"You can use the whitelist settings with the ",(0,i.kt)("inlineCode",{parentName:"p"},"presale")," option set to ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," in combination with the gateway settings. This will restrict the mint to only whitelist users and require them to complete the Gatekeeper's challenge.")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Creating a whitelist ",(0,i.kt)("strong",{parentName:"p"},"only")," for presale (e.g., allow whitelist users to mint before the ",(0,i.kt)("inlineCode",{parentName:"p"},"goLiveDate"),") and burning the whitelist token each time. Once the sales begin, whitelist users do not have any privileges."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"whitelistMintSettings": {\n    "mode" : "burnEveryTime",\n    "mint" : "7nE1GmnMmDKiycFkpHF7mKtxt356FQzVonZqBWsTWZNf",\n    "presale" : true,\n    "discountPrice" : null\n}\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Creating a whitelist for presale, burning the whitelist token each time and provide whitelist users with a 0.5 SOL price tag instead (specified by the ",(0,i.kt)("inlineCode",{parentName:"p"},"discountPrice"),"). Once the sales begin (i.e., everyone can mint), the whitelist gets you only the discount."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"whitelistMintSettings": {\n    "mode" : "burnEveryTime",\n    "mint" : "7nE1GmnMmDKiycFkpHF7mKtxt356FQzVonZqBWsTWZNf",\n    "presale" : true,\n    "discountPrice" : 0.5\n}\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Creating a whitelist for presale, not burning the whitelist token (you will be able to reuse it) and give whitelist users a 0.5 SOL price tag instead. Once the sales begin (i.e., everyone can mint), the whitelist gets you only the discount."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"whitelistMintSettings": {\n    "mode" : "neverBurn",\n    "mint" : "7nE1GmnMmDKiycFkpHF7mKtxt356FQzVonZqBWsTWZNf",\n    "presale" : true,\n    "discountPrice" : 0.5\n}\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Creating a whitelist, not burning the whitelist token (you will be able to reuse it) and gives whitelist users a 0.5 SOL price tag instead - i.e., the whitelist ",(0,i.kt)("strong",{parentName:"p"},"only")," gets you the discount."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"whitelistMintSettings": {\n    "mode" : "neverBurn",\n    "mint" : "7nE1GmnMmDKiycFkpHF7mKtxt356FQzVonZqBWsTWZNf",\n    "presale" : false,\n    "discountPrice" : 0.5\n}\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Creating a whitelist, burning the whitelist token each time, running the white list during the sale. This in effect restrict any user without the whitelist token from minting at all - this is why ",(0,i.kt)("inlineCode",{parentName:"p"},"presale")," is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"discountPrice")," set to ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),". The only purpose of the whitelist is to ",(0,i.kt)("strong",{parentName:"p"},"restrict")," the mint."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"whitelistMintSettings": {\n    "mode" : "burnEveryTime",\n    "mint" : "7nE1GmnMmDKiycFkpHF7mKtxt356FQzVonZqBWsTWZNf",\n    "presale" : false,\n    "discountPrice" : null\n}\n')))),(0,i.kt)("h2",{id:"freeze-settings"},"Freeze Settings"),(0,i.kt)("p",null,"The candy machine freeze feature allows setting up a candy machine that places creator treasury funds in escrow and automatically mints NFTs with the SPL token freeze feature enabled. This accomplishes two things: 1) prevents users from undercutting the mint price by immediately flipping their NFT on secondary markets at a price below the mint, 2) prevents the creator from running off with funds until all user NFTs are unfrozen."),(0,i.kt)("p",null,"When the freeze setting is enabled, newly minted NFTs are set as frozen preventing the user from transferring them and listing them with secondary exchanges. Frozen NFTs can be thawed once at least one of two conditions is true: 1) all NFTs have been minted out, 2) freeze time has elapsed (starting from time of the first mint). Once one of these conditions are met, anyone can call the permissionless\n",(0,i.kt)("inlineCode",{parentName:"p"},"thaw_nft")," crank on the candy machine to unthaw a NFT. Sugar allows unthawing a single NFT or all NFTs from a candy machine using the ",(0,i.kt)("a",{parentName:"p",href:"../reference/commands#thaw"},"sugar thaw")," command. This allows a creator, or anyone else, to thaw all NFTs from the candy machine."),(0,i.kt)("p",null,"Once all NFTs are thawed, the update authority can then call ",(0,i.kt)("a",{parentName:"p",href:"../reference/commands#unfreeze-funds"},"unfreeze-funds")," to unlock their funds and transfer them back to the treasury address."),(0,i.kt)("p",null,"The freeze features have a single config value in Sugar, ",(0,i.kt)("inlineCode",{parentName:"p"},"freezeTime"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"freezeTime": 86400\n')),(0,i.kt)("p",null,"This is the time, in seconds, to keep the NFTs frozen. This value can be anywhere from 0 seconds up to 2,592,000 seconds (30 days). The Sugar ",(0,i.kt)("inlineCode",{parentName:"p"},"create-config")," command accepts the freeze time in days and converts it to seconds behind the scene."),(0,i.kt)("p",null,"Creating a candy machine with ",(0,i.kt)("inlineCode",{parentName:"p"},"sugar deploy")," while there's a ",(0,i.kt)("inlineCode",{parentName:"p"},"freezeTime")," value set in the config file, will automatically create a candy machine with freeze settings enabled. To enable freeze settings to an existing candy machine ",(0,i.kt)("em",{parentName:"p"},"that has not started minting yet")," use the ",(0,i.kt)("inlineCode",{parentName:"p"},"sugar freeze enable")," command."),(0,i.kt)("p",null,"Disabling the freeze setting on a candy machine can be done at any time with ",(0,i.kt)("inlineCode",{parentName:"p"},"sugar freeze disable"),", but once disabled cannot be re-enabled if minting has already begun. When disabled, any newly minted NFTs will not be frozen, but all currently frozen NFTs will remain frozen until thawed."))}d.isMDXComponent=!0}}]);